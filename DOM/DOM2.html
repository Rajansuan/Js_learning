<!-- DOM is something which browsers provide us, not a part of js tech stack like setTimeout, http and fs

Lets create a simple website to calculate the sum of two numbers
This is a static website, clicking the button does nothing

But making them dynamic is hard
What do I mean, when I say dynamic -
1. Changing the elements on the website once the website is loaded
2. Actually calculating the sum based on the inputs and rendering it on the screen


Why are Ids useful?
Classes let you get rid of code repetition
But what do ids do?

Answer- 
They let you access elements via the DOM API
Can you use ids to do CSS? - Yes
But what do you use it for usually - Javascript

//We have to use the js if we want to make our weebsites dynamic
//Also to make it dynamic we have to use the DOM
//DOM is a global variable using which you can manipulatre the DOM


Now, lets say you donâ€™t have access to the calculation logic on the frontend
Lets assume its a hard problem that someone has exposed on a backend server
And you need to hit the backend server and get back the value

If you're trying to send a request to localhost, and you are hosting your server on localhost, then you don't need to specify the url, you only need to tell fetch() your path.

For example, my api end point is http://localhost:8082/api/config, then i would do fetch('/api/config').


<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Document</title>
  </head>
  <body>
    <input type="text" id="num1" />
    <input type="text" id="num2" />
    <button onclick="add()">Calculate Sum</button>
    <p id="result">Sum result will be here</p>

    <input type="text" id="num3">
    <input type="text" id="num4">
    <input type="text" id="num5">
    <button onclick="interest()">Calculate Interest</button>
    <p id="resInterest">Interest result will be here</p>
    <script>
      async function add() {
        let num1 = document.getElementById("num1").value;
        let num2 = document.getElementById("num2").value;
        let result = document.getElementById("result");
        const res = await fetch(
          `http://localhost:3005/sum?a=${num1}&b=${num2}`
        );
        const data = await res.json();
        result.innerHTML = data.data;
      }
      async function interest() {
        let num3 = document.getElementById("num3").value;
        let num4 = document.getElementById("num4").value;
        let num5 = document.getElementById("num5").value;
        let resInterest = document.getElementById("resInterest");
        const res = await fetch(
          `http://localhost:3005/interest?p=${num3}&r=${num4}&t=${num5}`
        );
        const data2 = await res.json();
        resInterest.innerHTML = data2.data;
      }
    </script>
  </body>
</html> 
<!-- -->
<!-- DEBOUNCING AND THROTLLING
 
If I remove the button and directly add oninput then it will call the function and hits the api every time the input is typed.
We do not want that as we need the input of minimum 2 characters.

Debouncing - delayed sending out of requests - example search bar of amazon
Throttling - limiting the number of requests per second
-->



<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Document</title>
  </head>
  <body>
    <input oninput="debounceAdd()" type="text" id="num1" />
    <input oninput="debounceAdd()" type="text" id="num2" />
    <!-- <button onclick="add()">Calculate Sum</button> -->
    <p id="result">Sum result will be here</p>

    <script>

    let timeOut;  
    function debounceAdd(){
        //delay the call to add() until this not been called for 100ms and this has to be called once
        //how you cancel a clock - clearTimeout
        clearTimeout(timeOut);
        timeOut = setTimeout(() => {
          add();
        }, 1000);
        
      }
      async function add() {
        let num1 = document.getElementById("num1").value;
        let num2 = document.getElementById("num2").value;
        let result = document.getElementById("result");
        const res = await fetch(
          `http://localhost:3005/sum?a=${num1}&b=${num2}`
        );
        const data = await res.json();
        result.innerHTML = data.data;
      }
    </script>
  </body>
</html>